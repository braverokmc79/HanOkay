<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.ana.mapper.AcmRegMapper">

	<resultMap id="AcmVOResult" type="com.ana.domain.AcmVO">
		<result column="acm_Num" property="acmNum" />
		<result column="acm_Name" property="acmName" />
		<result column="acm_City" property="acmCity" />
		<result column="acm_Distr" property="acmDistr" />
		<result column="acm_Detailaddr" property="acmDetailaddr" />
		<result column="rep_Phone" property="repPhone" />
		<result column="acm_Regdate" property="acmRegdate" />
		<result column="acm_Updatedate" property="acmUpdatedate" />
		<result column="acm_Type" property="acmType" />
		
		<result column="biz_Regnum" property="bizRegnum" />
		<result column="checkin_Time" property="checkinTime" />
		<result column="checkout_Time" property="checkoutTime" />
		<result column="sub_Phone" property="subPhone" />
		<result column="acm_Fax" property="acmFax" />
		<result column="acm_Email" property="acmEmail" />
		<result column="acm_Purl" property="acmPurl" />
		<result column="acm_Pname" property="acmPname" />
		
		<result column="latitude" property="latitude" />
		<result column="longitude" property="longitude" />
		<result column="acm_Desc" property="acmDesc" />
		<result column="acm_Acti" property="acmActi" />
		<result column="acm_status" property="acmStatus" />
		<result column="acm_Optcode" property="acmOptcode" />
		
		
	</resultMap>

	<!-- 호스트단에서 숙소등록 -->
	<!-- 한회원이 운영하는 숙소 다 가져오기 -->
	<select id="getListHosts" resultMap="AcmVOResult">
		<![CDATA[
		select * from TACM where biz_Regnum=#{bizRegnum}
		]]>
	</select>
	
	<!-- 객실 하나하나의 정보 가져오기 -->
	<select id="read" resultMap="AcmVOResult">
		select * from TROM where ROM_NUM =#{romNum}
	</select>
	
	
	<!-- 위도경도 추가 -->
	<insert id="newAcmReg">
		<selectKey keyProperty="acmNum" order="BEFORE"
			resultType="String">
			select concat('A',seq_tacm.nextval) from dual
		</selectKey>

		INSERT INTO TACM(acm_Num, acm_Name, acm_City,acm_Distr, acm_Detailaddr, rep_Phone, 
		acm_type,biz_regnum,checkin_time, checkout_time,sub_phone,
		acm_fax, acm_email, acm_purl,acm_pname, latitude,longitude)
		
		VALUES (#{acmNum},#{acmName},#{acmCity}, #{acmDistr}, #{acmDetailaddr},#{repPhone},
		#{acmType},	#{bizRegnum},#{checkoutTime},#{checkinTime},#{subPhone},
		#{acmFax},#{acmEmail},#{acmPurl},#{acmPname},#{latitude},#{longitude})
	</insert>
	
	
	<!-- 주소 중복체크 -->
	<select id="chkaddr" resultType="int">
	select count(*) from tacm
	where acm_Detailaddr = #{acmDetailaddr}
	</select>
	
	 
	<!-- 객실 삭제 -->
	<delete id="remove">
		delete from tacm where acm_Num = #{acmNum}
	</delete>

	<!-- 숙소1_6 정보(opt, desc) 수정 -->
	<update id="update1_6">
		update tacm
		set acm_optcode=#{acmOptcode}, acm_desc=#{acmDesc}
		where acm_Num = #{acmNum} 
	</update>






</mapper>
